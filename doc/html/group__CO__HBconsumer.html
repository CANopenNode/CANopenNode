<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CANopenNode: Heartbeat consumer</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CANopenNode
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__CO__HBconsumer.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Heartbeat consumer<div class="ingroups"><a class="el" href="group__CO__CANopen.html">CANopen stack</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>CANopen Heartbeat consumer protocol.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:CO__HBconsumer_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="CO__HBconsumer_8h.html">CO_HBconsumer.h</a></td></tr>
<tr class="memdesc:CO__HBconsumer_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">CANopen Heartbeat consumer protocol. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structCO__HBconsNode__t.html">CO_HBconsNode_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">One monitored node inside <a class="el" href="structCO__HBconsumer__t.html" title="Heartbeat consumer object. ">CO_HBconsumer_t</a>.  <a href="structCO__HBconsNode__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structCO__HBconsumer__t.html">CO_HBconsumer_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Heartbeat consumer object.  <a href="structCO__HBconsumer__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gacc31c4848a14c9c367505b20e4a6a496"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__CO__driver.html#ga1cb2d3466eb0c6d267f3b5ff1a0d9532">CO_ReturnError_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CO__HBconsumer.html#gacc31c4848a14c9c367505b20e4a6a496">CO_HBconsumer_init</a> (<a class="el" href="structCO__HBconsumer__t.html">CO_HBconsumer_t</a> *HBcons, <a class="el" href="structCO__EM__t.html">CO_EM_t</a> *em, <a class="el" href="structCO__SDO__t.html">CO_SDO_t</a> *SDO, const uint32_t HBconsTime[], <a class="el" href="structCO__HBconsNode__t.html">CO_HBconsNode_t</a> monitoredNodes[], uint8_t numberOfMonitoredNodes, <a class="el" href="structCO__CANmodule__t.html">CO_CANmodule_t</a> *CANdevRx, uint16_t CANdevRxIdxStart)</td></tr>
<tr class="memdesc:gacc31c4848a14c9c367505b20e4a6a496"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize Heartbeat consumer object.  <a href="#gacc31c4848a14c9c367505b20e4a6a496">More...</a><br /></td></tr>
<tr class="separator:gacc31c4848a14c9c367505b20e4a6a496"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga87b4601593551c6cb54cc5f881d72f1d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CO__HBconsumer.html#ga87b4601593551c6cb54cc5f881d72f1d">CO_HBconsumer_process</a> (<a class="el" href="structCO__HBconsumer__t.html">CO_HBconsumer_t</a> *HBcons, <a class="el" href="group__CO__dataTypes.html#ga449976458a084f880dc8e3d29e7eb6f5">bool_t</a> NMTisPreOrOperational, uint16_t timeDifference_ms)</td></tr>
<tr class="memdesc:ga87b4601593551c6cb54cc5f881d72f1d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process Heartbeat consumer object.  <a href="#ga87b4601593551c6cb54cc5f881d72f1d">More...</a><br /></td></tr>
<tr class="separator:ga87b4601593551c6cb54cc5f881d72f1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>CANopen Heartbeat consumer protocol. </p>
<p>Heartbeat consumer monitors Heartbeat messages from remote nodes. If any monitored node don't send his Heartbeat in specified time, Heartbeat consumer sends emergency message. If all monitored nodes are operational, then variable <em>allMonitoredOperational</em> inside <a class="el" href="structCO__HBconsumer__t.html" title="Heartbeat consumer object. ">CO_HBconsumer_t</a> is set to true. Monitoring starts after the reception of the first HeartBeat (not bootup).</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__CO__NMT__Heartbeat.html">NMT and Heartbeat</a> </dd></dl>
<h2 class="groupheader">Function Documentation</h2>
<a id="gacc31c4848a14c9c367505b20e4a6a496"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacc31c4848a14c9c367505b20e4a6a496">&#9670;&nbsp;</a></span>CO_HBconsumer_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__CO__driver.html#ga1cb2d3466eb0c6d267f3b5ff1a0d9532">CO_ReturnError_t</a> CO_HBconsumer_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structCO__HBconsumer__t.html">CO_HBconsumer_t</a> *&#160;</td>
          <td class="paramname"><em>HBcons</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structCO__EM__t.html">CO_EM_t</a> *&#160;</td>
          <td class="paramname"><em>em</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structCO__SDO__t.html">CO_SDO_t</a> *&#160;</td>
          <td class="paramname"><em>SDO</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>HBconsTime</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structCO__HBconsNode__t.html">CO_HBconsNode_t</a>&#160;</td>
          <td class="paramname"><em>monitoredNodes</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>numberOfMonitoredNodes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structCO__CANmodule__t.html">CO_CANmodule_t</a> *&#160;</td>
          <td class="paramname"><em>CANdevRx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>CANdevRxIdxStart</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize Heartbeat consumer object. </p>
<p>Function must be called in the communication reset section.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">HBcons</td><td>This object will be initialized. </td></tr>
    <tr><td class="paramname">em</td><td>Emergency object. </td></tr>
    <tr><td class="paramname">SDO</td><td>SDO server object. </td></tr>
    <tr><td class="paramname">HBconsTime</td><td>Pointer to <em>Consumer Heartbeat Time</em> array from Object Dictionary (index 0x1016). Size of array is equal to numberOfMonitoredNodes. </td></tr>
    <tr><td class="paramname">monitoredNodes</td><td>Pointer to the externaly defined array of the same size as numberOfMonitoredNodes. </td></tr>
    <tr><td class="paramname">numberOfMonitoredNodes</td><td>Total size of the above arrays. </td></tr>
    <tr><td class="paramname">CANdevRx</td><td>CAN device for Heartbeat reception. </td></tr>
    <tr><td class="paramname">CANdevRxIdxStart</td><td>Starting index of receive buffer in the above CAN device. Number of used indexes is equal to numberOfMonitoredNodes.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__CO__driver.html#ga1cb2d3466eb0c6d267f3b5ff1a0d9532" title="Return values of some CANopen functions. ">CO_ReturnError_t</a> CO_ERROR_NO or CO_ERROR_ILLEGAL_ARGUMENT. </dd></dl>

</div>
</div>
<a id="ga87b4601593551c6cb54cc5f881d72f1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga87b4601593551c6cb54cc5f881d72f1d">&#9670;&nbsp;</a></span>CO_HBconsumer_process()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CO_HBconsumer_process </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structCO__HBconsumer__t.html">CO_HBconsumer_t</a> *&#160;</td>
          <td class="paramname"><em>HBcons</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__CO__dataTypes.html#ga449976458a084f880dc8e3d29e7eb6f5">bool_t</a>&#160;</td>
          <td class="paramname"><em>NMTisPreOrOperational</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>timeDifference_ms</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Process Heartbeat consumer object. </p>
<p>Function must be called cyclically.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">HBcons</td><td>This object. </td></tr>
    <tr><td class="paramname">NMTisPreOrOperational</td><td>True if this node is NMT_PRE_OPERATIONAL or NMT_OPERATIONAL. </td></tr>
    <tr><td class="paramname">timeDifference_ms</td><td>Time difference from previous function call in [milliseconds]. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Feb 2 2017 14:12:28 for CANopenNode by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
